(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{838:function(a,s,t){"use strict";t.r(s);var n=t(79),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"nmap端口扫描"}},[a._v("nmap端口扫描 "),s("a",{staticClass:"header-anchor",attrs:{href:"#nmap端口扫描"}},[a._v("#")])]),a._v(" "),s("p",[s("a",{attrs:{href:"https://nmap.org/man/zh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("nmap官方文档"),s("OutboundLink")],1)]),a._v(" "),s("h1",{attrs:{id:"常用参数"}},[a._v("常用参数 "),s("a",{staticClass:"header-anchor",attrs:{href:"#常用参数"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T4")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Pn")]),a._v(" IP\t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#最常用的一种扫描")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T4")]),a._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置时序，越高扫描越快")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启用操作系统检测，版本检测，脚本扫描和跟踪路由")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#增加详细级别（使用-vv或更高级别以获得更好的效果）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Pn")]),a._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#无ping扫描")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h2",{attrs:{id:"主机发现"}},[a._v("主机发现 "),s("a",{staticClass:"header-anchor",attrs:{href:"#主机发现"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Scan Type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("target specification"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指令格式")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Scan Types 指探测类型：")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-PS")]),a._v(" 指 TCP SYN Ping，\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-PA")]),a._v(" 指 TCP ACK Ping，\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-PU")]),a._v(" 指 UDP Ping\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-PE")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ICMP Ping，现在很多主机封锁这些报文，适用于管理员监视内部网络")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Options 指探测选项：")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" 指不对活动的 IP 地址进行反向域名解析，用以提高扫描速度\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" 指对活动的 IP 进行反向域名解析\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#target specification 指探测的目标地址或 IP 地址范围")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1-255\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br")])]),s("p",[s("strong",[a._v("默认主机发现扫描")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1-255\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Nmap 会发送一个 ICMP echo 请求，一个 TCP SYN 包给 443 端口，一个 TCP ACK 包给 80 端口和一个 ICMP 时间戳请求")]),a._v(" "),s("p",[a._v("这就等价于使用命令 "),s("code",[a._v("nmap -PE -PS443 -PA80 -PP 192.168.0.1-255")])]),a._v(" "),s("p",[a._v("此命令返回一个 IP 地址段中活动的主机，及其 IP 地址，主机域名，开启的服务以及相应的端口，MAC 地址等信息")]),a._v(" "),s("p",[s("strong",[a._v("其它命令")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sP")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1-255\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ping扫描，只列出存活主机，速度最快")]),a._v("\nnmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Pn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1-255\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#无ping扫描，结果和默认主机发现一样")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"其它参数"}},[a._v("其它参数 "),s("a",{staticClass:"header-anchor",attrs:{href:"#其它参数"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启用操作系统检测")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sV")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#探测服务版本信息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#增加详细级别（使用-vv或更高级别以获得更好的效果）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--script")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("script_name\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#使用nse脚本")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h1",{attrs:{id:"端口扫描"}},[a._v("端口扫描 "),s("a",{staticClass:"header-anchor",attrs:{href:"#端口扫描"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("-65535 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -p选项，只扫描指定的端口")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"nmap所识别的6个端口状态"}},[a._v("Nmap所识别的6个端口状态 "),s("a",{staticClass:"header-anchor",attrs:{href:"#nmap所识别的6个端口状态"}},[a._v("#")])]),a._v(" "),s("p",[s("strong",[a._v("open(开放的)")])]),a._v(" "),s("p",[a._v("应用程序正在该端口接收TCP 连接或者UDP报文。")]),a._v(" "),s("p",[s("strong",[a._v("closed(关闭的)")])]),a._v(" "),s("p",[a._v("关闭的端口对于Nmap也是可访问的(它接受Nmap的探测报文并作出响应)， 但没有应用程序在其上监听。")]),a._v(" "),s("p",[s("strong",[a._v("filtered(被过滤的)")])]),a._v(" "),s("p",[a._v("由于包过滤阻止探测报文到达端口， Nmap无法确定该端口是否开放。")]),a._v(" "),s("p",[a._v("过滤可能来自专业的防火墙设备，路由器规则 或者主机上的软件防火墙。")]),a._v(" "),s("p",[s("strong",[a._v("unfiltered(未被过滤的)")])]),a._v(" "),s("p",[a._v("未被过滤状态意味着端口可访问，但Nmap不能确定它是开放还是关闭。")]),a._v(" "),s("p",[a._v("只有用于映射防火墙规则集的ACK扫描才会把端口分类到这种状态。")]),a._v(" "),s("p",[a._v("用其它类型的扫描如窗口扫描，SYN扫描，或者FIN扫描来扫描未被过滤的端口可以帮助确定 端口是否开放。")]),a._v(" "),s("p",[s("strong",[a._v("open|filtered(开放或者被过滤的)")])]),a._v(" "),s("p",[a._v("当无法确定端口是开放还是被过滤的，Nmap就把该端口划分成 这种状态。")]),a._v(" "),s("p",[a._v("开放的端口不响应就是一个例子。没有响应也可能意味着报文过滤器丢弃 了探测报文或者它引发的任何响应。")]),a._v(" "),s("p",[a._v("因此Nmap无法确定该端口是开放的还是被过滤的。 UDP，IP协议， FIN，Null，和Xmas扫描可能把端口归入此类。")]),a._v(" "),s("p",[s("strong",[a._v("closed|filtered(关闭或者被过滤的)")])]),a._v(" "),s("p",[a._v("该状态用于Nmap不能确定端口是关闭的还是被过滤的。 它只可能出现在IPID Idle扫描中。")]),a._v(" "),s("h2",{attrs:{id:"端口扫描技术"}},[a._v("端口扫描技术 "),s("a",{staticClass:"header-anchor",attrs:{href:"#端口扫描技术"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#只列举常见的，详细可参考官方文档")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sT")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#TCP连接扫描")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sS")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#SYN扫描")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sU")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#UDP扫描")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sA")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ACK扫描")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sF")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#FIN扫描")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[s("strong",[a._v("TCP连接扫描")])]),a._v(" "),s("p",[a._v("使用操作系统的网络连接系统调用 connect()，对目标主机发起 TCP 三路握手，待完成后 Nmap 立即中断此次连接。")]),a._v(" "),s("p",[a._v("Nmap 通过获取每个尝试连接的状态信息来判定侦测端口的状态")]),a._v(" "),s("p",[s("strong",[a._v("SYN扫描")])]),a._v(" "),s("p",[a._v("Nmap 产生一个 SYN 数据报文，如果侦测端口开放并返回 SYN-ACK 响应报文")]),a._v(" "),s("p",[a._v("Nmap 据此发送 RST 报文给侦测端口结束当前连接，这样做的好处在于缩短了端口扫描时间")]),a._v(" "),s("p",[s("strong",[a._v("UDP扫描")])]),a._v(" "),s("p",[a._v("UDP 本身是无连接的协议，Nmap 向目标主机的端口发送 UDP 探测报文")]),a._v(" "),s("p",[a._v("如果端口没有开放，被侦测主机将会发送一个 ICMP 端口不可到达的消息")]),a._v(" "),s("p",[a._v("Nmap 根据这个消息确定端口闭合（closed）或者被过滤 (unfiltered)")]),a._v(" "),s("p",[a._v("通常没有回复意味着端口是开放（open）状态 。")]),a._v(" "),s("p",[s("strong",[a._v("ACK扫描")])]),a._v(" "),s("p",[a._v("这种扫描比较特殊，它不能确切知道端口的基本状态，而是主要用来探测防火墙是否存在以及其中设定的过滤规则")]),a._v(" "),s("p",[s("strong",[a._v("FIN扫描")])]),a._v(" "),s("p",[a._v("和 SYN 扫描相比，这种方式更为隐蔽，因此能够穿过防火墙的过滤")]),a._v(" "),s("p",[a._v("关闭（closed）端口将会返回合适的 RST 报文，而开放端口将忽略这样的侦测报文")]),a._v(" "),s("p",[a._v("具备类似防火墙不敏感特性的还有 -sN NULL 扫描，-sX X-mas 扫描。")]),a._v(" "),s("h1",{attrs:{id:"防火墙-ids逃逸"}},[a._v("防火墙/IDS逃逸 "),s("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-ids逃逸"}},[a._v("#")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mtu")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#报文分段，mtu必须是8的倍数")]),a._v("\n\nnmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sI")]),a._v(" www.0day.com:80 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#源IP欺骗")]),a._v("\n\nnmap --source-port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\t\t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#源端口欺骗")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#防火墙对服务器的设置会根据端口选择是否信任数据流")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#管理员可能会认为这些端口不会有攻击发生，所以可以利用这些端口扫描")]),a._v("\n\nnmap --data-length "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在原来报文基础上，附加随机数据，达到规避防火墙的效果")]),a._v("\n\nnmap --spoof-mac "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定一个随机的MAC地址")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);